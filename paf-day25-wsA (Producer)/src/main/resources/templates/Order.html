<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Order</title>
    <style>
        .order-detail {
            border: 1px solid #ccc;
            padding: 10px;
            margin: 10px 0;
        }
    </style>
</head>

<body>
    <h1>Create Order</h1>
    <form action="/order" method="POST" enctype="application/x-www-form-urlencoded">
        <!-- Order Details -->
        <h2>Order</h2>

        <label for="orderDate">Order Date:</label>
        <input type="date" id="orderDate" name="orderDate" required><br><br>

        <label for="customerName">Customer Name:</label>
        <select name="customerName" required>
            <option value="" disabled selected>Select Customer Name</option>
            <option th:each="name : ${customerNames}"
                    th:text="${name}"
                    th:value="${name}">
            </option>
        </select><br><br>

        <label for="shipAddress">Shipping Address:</label>
        <input type="text" id="shipAddress" name="shipAddress" required><br><br>

        <label for="notes">Notes:</label>
        <textarea id="notes" name="notes"></textarea><br><br>

        <label for="tax">Tax:</label>
        <input type="number" id="tax" name="tax" step="0.01" required><br><br>

        <!-- OrderDetail Entries -->
        <h2>Order Details</h2>
        <div id="orderDetailsContainer"></div>
        <button type="button" onclick="addOrderDetail()">Add Order Detail</button><br><br>

        <!-- Submit Button -->
        <button type="submit">Submit Order</button>
    </form>

    <script>
        // Function to add a new OrderDetail section
        function addOrderDetail() {
            const container = document.getElementById("orderDetailsContainer");

            const orderDetailDiv = document.createElement("div");
            orderDetailDiv.classList.add("order-detail");

            orderDetailDiv.innerHTML = `
                <label for="product">Product:</label>
                <input type="text" name="orderDetails[][product]" required><br><br>

                <label for="unitPrice">Unit Price:</label>
                <input type="number" name="orderDetails[][unitPrice]" step="0.01" required><br><br>

                <label for="discount">Discount:</label>
                <input type="number" name="orderDetails[][discount]" step="0.01" required><br><br>

                <label for="quantity">Quantity:</label>
                <input type="number" name="orderDetails[][quantity]" min="1" required><br><br>

                <button type="button" onclick="removeOrderDetail(this)">Remove</button>
            `;

            container.appendChild(orderDetailDiv);
        }

        // Function to remove an OrderDetail section
        function removeOrderDetail(button) {
            button.parentElement.remove();
        }
    </script>
</body>
</html>